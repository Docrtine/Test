<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Companies</title>
    <link rel="stylesheet" type="text/css" href="style/style.css">
    <script src="jquery-2.0.2.js" type="text/javascript"></script>
    <script>
        $(document).ready(function() {
            $("#uncompanies").hide();
            var data = $.ajax({
                url: 'http://codeit.pro/frontTestTask/company/getList',
                dataType : "json",
                type: "post",
                success: function (data, textStatus) {
                    var list = data.list;

                    function totalCompanies () {
                        var total = list.length;
                        $("#totalCompanies").text(total);
                    }

                    function listOfCompanies() {
                        var fRow = $("<a><div class='elem'></div></a>");
                        console.log(list);
                        for(var i = 0; i < list.length; i++) {
                            var f = fRow.clone().appendTo("#companies")
                                    .attr("href", "#").children()
                                    .filter("div").text(list[i].name)
                                    .on("click", {listOfPartners: list[i].partners}, showCompanyPartners);
                        }
                    }

                    function showCompanyPartners(e) {
                        var data = e.data.listOfPartners;

                        for(var i = 0; i < data.length; i++) {
                            console.log(data[i]);
                           //график
                        }
                        $("#uncompanies").show("fast");
                        e.preventDefault();

                    }
                    listOfCompanies();
                    totalCompanies();

                }
            });

        })
    </script>
</head>
<body>
<div id="mainCompanies">
    <div id="total">
        <div  class="companiesSpan">Total Companies</div>
        <div id="totalCompanies">
            <p></p>
        </div>
    </div>
    <div id="companiesList">
        <div id="totalCompanies" class="companiesSpan">List of Companies</div>
        <div id="companies"></div>

    </div>
    <div id="uncompanies">
        <div id="totalCompanies" class="companiesSpan">Company partners</div>
        <div id="uncompany"></div>
    </div>
    <div id="diagrams">
        <div id="totalCompanies" class="companiesSpan">Companies by Location</div>
    </div>
    <div id="news">
        <div id="totalCompanies" class="companiesSpan">News</div>
    </div>
</div>

</body>
</html>